<!doctype html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
<link rel="shortcut icon" href="static/img/favicon/prp-web.ico">

    <title>个人主页</title>

    <!-- CSS here -->
    <link rel="stylesheet" href="static/css/bootstrap.min.css">
    <link rel="stylesheet" href="static/css/style.css">
    <link rel="stylesheet" href="static/css/font-awesome.min.css">
    <link rel="stylesheet" href="static/css/mycss/modified-data.css">
    <link rel="stylesheet" href="static/css/mycss/personage.css">
    <link rel="stylesheet" href="static/css/mycss/personalDe.css">
    <link rel="stylesheet" href="static/css/slicknav.css">
    

    <style>
        .profile-photo img{
            width: 100%;
            height: 100%;
            object-fit: cover;
            object-position: center;
        }
    </style>
</head>

<body>
    <!-- header_start  -->
    <header>
        <div class="nav">
            <div class="nav-left">
                <img src="static/img/logo.png" alt="">
            </div>
            <div class="nav-right">
                <ul class="navcontent">
                    <li><a  href="index.html">主页</a></li>
                    <li><a href="base.html">基地</a></li>
                    <li><a href="javascript:;">领养</a></li>
                    <li><a href="volunteer.html">志愿者</a></li>
                    <li><a href="#">其他</a></li>
                    <li id="personal" class="personal">
                        <a href="javascript:;" id="personal-a">
                            <div id="personal-div">
                                <img src="static/img/new/动物.svg" class="img-responsive center-block" id="personal-img">
                            </div>

                            <span>&nbsp;&nbsp;登陆/注册</span>
                        </a>

                        <ul class="semenu" id="personal-ul" style="display:block;width: 120px;">
                            <li><a href="personal-page.html">个人主页</a></li>
                            <li><a href="#"  id="exit-personal">退出</a></li>
                        </ul>
                    </li>
                </ul>
            </div>
        </div>
    </header>
    <!-- header_end  -->

    <div class="return">
        <a href="personal-page.html"><i class="fa fa-reply"></i>返回</a>
    </div>
    <section>
        <div class="change-box">
            <div class="change-nav" id="change-nav">
                <span class="change-title">个人中心</span>
                <ul>
                    <li class="change-color">
                        <i class="fa fa-navicon"></i><span>我的信息</span>
                    </li>
                    <li>
                        <i class="fa fa-cog"></i><span>账号设置</span>
                    </li>
                    <!-- <li>
                        <i class="fa fa-handshake-o"></i><span>我的申请</span>
                    </li>
                    <li>
                        <i class="fa fa-heart"></i><span>我的领养</span>
                    </li> -->
                </ul>
            </div>

            <div class="change-content" id="change-content">
                <div class="mod">
                    <div class="title"><i class="fa fa-navicon"></i>我的信息</div>
		            <div class="change-data" style="float: left;">
                        <form>
                            <label><span>昵&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;称：</span><input type="text" class="form-control" id="nickname"></label>
                            
                            <div class="sex">
                                <span>性&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;别：</span>
                                <label class="sexBtn"><input type="radio" name="sex" checked id="male" value="男">男</label>
                                <label class="sexBtn"><input type="radio" name="sex" style="margin-left:3rem;" id="female" value="女">女</label>
                            </div>
                            <label><span>年&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;龄：</span><input type="text" class="form-control" id="age"></label>

                            <label><span>真实姓名：</span><input type="text" class="form-control" id="realname"></label>
                            <label><span>电话号码：</span><input type="text" class="form-control" id="phone"></label>


                            <div class="info">
                                <span>所&nbsp;&nbsp;在&nbsp;&nbsp;地：</span>
                                <select id="s_province" name="s_province" class="form-control add-select" style="margin-left: 0.9rem;" value ="北京市"></select>
                                <select id="s_city" class="form-control add-select"></select>
                                <select id="s_county" class="form-control add-select"></select>
                                <br /><br />
                                <script class="resources library" src="js/ajaxForJs/personAddSe.js" type="text/javascript"></script>
                                <script type="text/javascript">_init_area();</script>
                            </div>

                            <label><span>我的签名：</span><input type="text" class="form-control" placeholder="请设置您的签名~" id="intro" style="width: 78%;" maxlength="30" ></input></label>
                            
                                <div id="show"></div>
                            <label><span>我的简介：</span><textarea class="form-control" placeholder="请填写您的简介~" id="info" maxlength="70"></textarea></label>
                            <!-- <label class="saveBtn" id="saveBtn"><button>保存</button></label> -->
                            <div class="saveBtn">
                                <a href="javascript:;"  class="" id="saveBtn">保存</a>
                            </div>
                            <!-- </label> -->
                        </form>
                    </div>

                    
                    <div class="profile-photo" style="float: right;position: absolute;right: 80px;">
                        <!-- <img src="static/img/profile.jpg" alt="" id="preview"> -->
                        <div class="photo-amend">
                            <div class="photo-mask"></div>
                            <div class="amend-content">
                                <span class="fa fa-camera"></span>
                                <p class="amend">修改我的头像</p>
                            </div>
                            <input type="file" name="file" onchange="imgPreview(this)" class="Select-file" id="crowd_file"/>
                        </div>
                    </div>
                </div>

		        <div class="mod" style="display:none;"> 
                    <div class="title"><i class="fa fa-cog"></i>账号设置</div>
                    <div class="change-data">
                        <form>
                            <label>
                                <span>原&nbsp;&nbsp;密&nbsp;&nbsp;码：</span> 
                                <input type="text"  class="form-control" id="beginning-pas"/>
                            </label>
                            
                           
                            <label>
                                <span>新&nbsp;&nbsp;密&nbsp;&nbsp;码：</span>
                                <input type="password" class="form-control" id="new-pas"/>
                            </label>

                            <label>
                                <span>确认密码：</span>
                                <input type="password" class="form-control" id="confirm-pas">
                            </label>
        
                            
                            <!-- <label class="submitBtn">
                                <span>验&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;证：</span>
                                <input type="text" placeholder="验证码" class="form-control" id="phone-code"/>
                                <button type="button" value="发送验证码" id="register-btn" />
                                发送验证码
                                </button>
                            </label> -->
                            <!-- <label class="submitBtn"><button>提交</button></label> -->
                            <div class="submitBtn">
                                <a href="javascript:;"  class="" id="submitBtn">提交</a>
                            </div>
                        </form>
                    </div>
                </div>
                
                
            </div>
        </div>
    </section>
    
    <!-- 尾部 start  -->
    <footer class="footer dim">
        <div class="footer_top">
            <div class="container">
                <div class="row">
                    <div class="col-xl-3 col-md-6 col-lg-3">
                        <div class="footer_widget">
                            <h3 class="footer_title">
                                联系我们
                            </h3>
                            <ul class="address_line">
                                <li>联系电话：123456</li>
                                <li>Emily：1234@123.com</li>
                                <li>×××</li>
                            </ul>
                        </div>
                    </div>
                    <div class="col-xl-3  col-md-6 col-lg-3">
                        <div class="footer_widget">
                            <h3 class="footer_title">
                                我们的服务
                            </h3>
                            <ul class="links">
                                <li><a href="#">志愿者申请</a></li>
                                <li><a href="#">爱心领养</a></li>
                                <li><a href="#">动物科普</a></li>
                                <li><a href="#">基地介绍</a></li>
                                <li><a href="#">论坛</a></li>
                            </ul>
                        </div>
                    </div>
                    <div class="col-xl-3  col-md-6 col-lg-3">
                        <div class="footer_widget">
                            <h3 class="footer_title">
                                快速连接
                            </h3>
                            <ul class="links">
                                <li><a href="#">基地介绍</a></li>
                                <li><a href="#">志愿者申请</a></li>
                                <li><a href="#">爱心领养</a></li>
                                <li><a href="#">我的主页</a></li>
                                <li><a href="#">论坛</a></li>
                            </ul>
                        </div>
                    </div>
                    <div class="col-xl-3 col-md-6 col-lg-3 ">
                        <div class="footer_widget">
                            <div class="footer_logo">
                                <a href="#">
                                    <img src="static/img/logo.png" alt="">
                                </a>
                            </div>
                            <p class="address_text">208, 113.6401 lat, ZHENGZHOU 
                                HENAN, CHINA
                            </p>
                            <div class="socail_links">
                                <ul>
                                    <li>
                                        <a href="#">
                                            <i class="ti-facebook"></i>
                                        </a>
                                    </li>
                                    <li>
                                        <a href="#">
                                            <i class="ti-pinterest"></i>
                                        </a>
                                    </li>
                                    <li>
                                        <a href="#">
                                            <i class="fa fa-google-plus"></i>
                                        </a>
                                    </li>
                                    <li>
                                        <a href="#">
                                            <i class="fa fa-linkedin"></i>
                                        </a>
                                    </li>
                                </ul>
                            </div>

                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="copy-right_text">
            <div class="container">
                <div class="bordered_1px">
                    <p>Copyright © 2020.NICE工作室</p>
                </div>
                
            </div>
        </div>
    </footer>
    <!-- 尾部 end  -->
<!--    <script src="js/ajaxForJs/personAddSe.js"></script>-->
    <script type="text/javascript">
        
        var Gid  = document.getElementById ;

        var showArea = function(){

            Gid('show').innerHTML = "<h3>省" + Gid('s_province').value + " - 市" + 	

            Gid('s_city').value + " - 县/区" + 

            Gid('s_county').value + "</h3>"

        }
        Gid('s_county').setAttribute('onchange','showArea()');

    </script>

  

    <!-- JS here -->
    <script src="static/js/vendor/jquery-1.12.4.min.js"></script>
    <script src="static/js/bootstrap.min.js"></script>

    <!-- ajax访问 -->
    <script src="static/js/ajaxForJs/personal.js"></script>
    <script src="static/js/ajaxForJs/personalPhoto.js"></script>
 
    <script src="static/js/ajaxForJs/remember.js"></script>
    <script src="static/js/ajaxForJs/verifyMail.js"></script>
    <script src="static/js/ajaxForJs/forget-verify.js"></script>
    <script src="static/js/ajaxForJs/createUser.js"></script>
    <script src="static/js/ajaxForJs/forgetPassword.js"></script>
    <script src="static、/js/ajaxForJs/exit.js"></script>
	<script src="static/js/ajaxForJs/login-other.js"></script>
	<script src="static/js/ajaxForJs/checkLogin.js"></script>
	<script src="js/ajaxForJs/personalDe.js"></script>
    <script src="static/js/ajaxForJs/personalMessage.js"></script>
    <script src="static/js/ajaxForJs/personalChage.js"></script>
    <script src="static/js/ajaxForJs/passwordChange.js"></script>
    <script src="static/js/ajaxForJs/personalAdopt.js"></script>
    <script src="static/js/ajaxForJs/personalVolun.js"></script>

    <script>
        $(function() {
        //  设置src属性
        //   generateMixed();
        //   function generateMixed(){
        //   $(".cover-img").attr("src", function() {
        //       return "static/img/base/" + parseInt(5*Math.random() + 1) + ".jpg"
        //   }); 
        //   }

        //修改我的头像
        $('.profile-photo').mouseenter(function(){
            $('.photo-amend').fadeIn(200);
        });
        $('.profile-photo').mouseleave(function(){
            $('.photo-amend').fadeOut(200);
        });
        
        })

        //上传头像
        function imgPreview(fileDom){
            //判断是否支持FileReader
            if (window.FileReader) {
                var reader = new FileReader();
            } else {
                alert("您的设备不支持图片预览功能，如需该功能请升级您的设备！");
            }

            //获取文件
            var file = fileDom.files[0];
            console.log(file);
            var imageType = /^image\//;
            //是否是图片
            if (!imageType.test(file.type)) {
                alert("请选择图片！");
                return;
            }
            //读取完成
            reader.onload = function(e) {
                //获取图片dom
                var img = document.getElementById("preview");
                //图片路径设置为读取的图片
                img.src = e.target.result;
                // console.log(img.src);

                //给后台传图片 
                $()
                // 拿到传的图片文件
                var formData = new FormData();
                formData.append("icon_file",$('#crowd_file')[0].files[0])
                
                formData.append("user_id",JSON.parse(getCookie("user_data")).user_id)
                

                $.ajax({
                    type:'POST',
                    url:"http://192.168.1.233:8080/changeUserIconById",
                    data:formData,
                    contentType:false,
                    processData:false,//这个很有必要，不然不行
                    dataType:"json",
                    mimeType:"multipart/form-data",
                    success:function(data){
                            if(200==data.code){
                                // 重新将图片存一下
                                var userData = JSON.parse(getCookie("user_data"))
                                userData.user_icon = data.data
                                setCookie("user_data",JSON.stringify(userData))
                                // window.location.reload();
                            }else{
                                // Feng.error("保存失败!"+data.message);
                            }
                        }
                });

            };
            reader.readAsDataURL(file);
        }

        $.fn.changeTab=function(index){
            $(this).find(".mod:eq("+index+")").show().siblings(".mod").hide();
        }

        $(function(){
            $("#notice .notice-tit li").click(function(){
            $(this).addClass("select").siblings("li").removeClass("select");

            var index=$(this).index();
            //$("#notice-con .mod:eq("+index+")").show().siblings(".mod").hide();
            $("#notice-con").find(".mod:eq("+index+")").show().siblings(".mod").hide();
            });
        });

    </script> 


   <script src="../common/js/cookieUtil.js"></script>

    <script src="static/js/myjs/jquery.cookie.js"></script>
    <script src="static/js/myjs/nav.js"></script>


</body>

</html>
